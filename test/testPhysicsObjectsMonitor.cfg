process PhysicsObjectsMonitoring = {
    
# Event source
    source = PoolSource{
	untracked vstring fileNames ={
  ##'file:/tmp/segoni/mtcc.00003595.A.testStorageManager_0.50.root'
##  'file:/afs/cern.ch/user/m/mulders/scratch0/mtcc2file/mtcc.00003595.A.testStorageManager_0.50.root'
'rfio:/castor/cern.ch/cms/MTCC/data/00003603/A/mtcc.00003603.A.testStorageManager_0.50.root'
        }
	untracked int32 maxEvents = 500
#	untracked uint32 skipEvents = 10
	untracked uint32 debugVebosity = 10
	untracked bool   debugFlag     = true
    }


# Messages
    service = MessageLogger {
	untracked vstring destinations = { "cout" }
	untracked PSet cout = {
	    untracked bool noLineBreaks = true
	    untracked string threshold = "INFO"
	}
    }

#### DQM 

	service = LockService{ untracked vstring labels = {"source"} }
	service = DaqMonitorROOTBackEnd{}
	include "DQMServices/Daemon/test/data/dqm_monitorDaemon.cfi"
	replace MonitorDaemon.AutoInstantiate = false
	replace MonitorDaemon.DestinationAddress ="lxplus060.cern.ch"

####

# Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
# Geometries
    include "Geometry/CMSCommonData/data/cmsMTCCGeometryXML.cfi"      
#
# DT, CSC, RPC, and Tracker geometry producers
#
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    include "Geometry/DTGeometry/data/dtGeometry.cfi"
    include "Geometry/CSCGeometry/data/cscGeometry.cfi"
    include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
    include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
    include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

# ES producer
    include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"

# 
#    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi" 
#    include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
#    include "Geometry/DTGeometry/data/dtGeometry.cfi"
#    include "Geometry/CSCGeometry/data/cscGeometry.cfi"
#    include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"
 
########################################
# DT modules:
#

# MTCC DT Cable Mapping  ###############
es_source mapping = PoolDBESSource { 
  VPSet toGet = {
    {string record = "DTReadOutMappingRcd"
     string tag = "MTCCMap"}
  }
  bool loadAll = true
  string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/MTCCMap.db"
  untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/MTCCCatalog.xml"
  string timetype = "runnumber"
  untracked uint32 authenticationMethod = 0
  untracked uint32 messagelevel = 3
}

# DT Raw to Digi unpacker ##############  
module dtunpacker = DTUnpackingModule {
  string dataType = "DDU"
  untracked bool debugMode = false
  untracked bool readingDDU = true
  untracked bool isRaw = false
  untracked bool globalDAQ = true
  untracked int32 dduID = 770
  untracked bool performDataIntegrityMonitor = false
}
                                                                                                            	
# Coarse Time Pedestals
es_source TTrig = PoolDBESSource { 
  VPSet toGet = {
    {string record = "DTTtrigRcd" 
     string tag = "tTrigMTCC"}
    }
  bool loadAll = true
  string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/tTrigMTCC_global.db"
  untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/MTCCCatalog.xml"
  string timetype = "runnumber" 
  untracked uint32 authenticationMethod = 0
  untracked uint32 messagelevel = 0
}

# Fine Time Pedestals
es_source TZero = PoolDBESSource {  
  VPSet toGet = {
    {string record = "DTT0Rcd" 
     string tag = "t0MTCC"}
  }
  bool loadAll = true
  string connect = "sqlite_file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/t0MTCC.db"
  untracked string catalog = "file:/afs/cern.ch/cms/Physics/muon/CMSSW/DT/SQLLite_090/MTCCCatalog.xml"
  string timetype = "runnumber" 
  untracked uint32 authenticationMethod = 0		
  untracked uint32 messagelevel = 0
}

# The module for 1D DT RecHit building
#    include "RecoLocalMuon/DTRecHit/data/dt1DRecHits_NoDrift_CosmicData.cfi"
    include "RecoLocalMuon/DTRecHit/data/DTRecHit1DProducer_LinearDrift_CosmicData.cfi"
    include "RecoLocalMuon/DTSegment/data/DTSegment2DProducer_CombPatternReco2D_LinearDrift_CosmicData.cfi"

## _4DAlgo ##
    include "RecoLocalMuon/DTSegment/data/DTSegment4DProducer_CombPatternReco4D_LinearDrift_CosmicData.cfi"


    module muonCSCDigis = CSCDCCUnpacker {
	untracked bool Debug = false
	FileInPath theMappingFile = "CondFormats/CSCObjects/test/csc_slice_test_map.txt"
	untracked bool PrintEventNumber = false
        untracked bool UseExaminer = true
        untracked uint32 ErrorMask = 0xDFCFEFFF
        untracked uint32 ExaminerMask = 0x7FB7BF6
        untracked bool runDQM = false
    }
    
    include "RecoLocalMuon/CSCRecHit/data/CSCRecHit2DProducer.cfi"
    include "RecoLocalMuon/CSCSegment/data/CSCSegmentProducer.cfi"

   
# Seed generator
#    include "RecoMuon/MuonSeedGenerator/data/MuonSeedProducer.cfi"
# Or Cosmic Muon Seed generator
    include "RecoMuon/MuonSeedGenerator/data/CosmicMuonSeedProducer.cfi"

# Standalone muon producer
#    include "RecoMuon/StandAloneMuonProducer/data/StandAloneMuonProducer.cfi"
#    replace standAloneMuons.STATrajBuilderParameters.RefitterParameters.EnableRPCMeasurement = false
#    replace standAloneMuons.STATrajBuilderParameters.BWFilterParameters.EnableRPCMeasurement = false
#    replace standAloneMuons.MuonSeedCollectionLabel = "CosmicMuonSeed"

# Stand Alone Muons: The services
#include "RecoMuon/TrackingTools/data/MuonServiceProxy.cff"

# Stand Alone Muons Producer
##include "RecoMuon/StandAloneMuonProducer/data/standAloneMuons.cfi"

    include "RecoMuon/StandAloneMuonProducer/data/StandAloneMuonProducer.cfi"
### 1_1_0_pre1    replace standAloneMuons.MuonSeedCollectionLabel = "CosmicMuonSeed"
    replace standAloneMuons.InputObjects = CosmicMuonSeed
    replace standAloneMuons.STATrajBuilderParameters.BWFilterParameters.NavigationType = "Direct"
    replace standAloneMuons.STATrajBuilderParameters.RefitterParameters.NavigationType = "Direct"
    replace standAloneMuons.STATrajBuilderParameters.RefitterParameters.EnableRPCMeasurement = false
    replace standAloneMuons.STATrajBuilderParameters.BWFilterParameters.EnableRPCMeasurement = false



# Or Cosmic muon producer
## 	include "RecoMuon/CosmicMuonProducer/data/CosmicMuonProducer.cfi"


# Output
    module out = PoolOutputModule {
	untracked string fileName ="STAMuons.root"
    }
    
    
# Analyzer
    module PhysicsObjectsMonitor = PhysicsObjectsMonitor {
	untracked string DataType = "RealData"
	untracked string StandAloneTrackCollectionLabel = "standAloneMuons"
	untracked string MuonSeedCollectionLabel = "CosmicMuonSeed"
        untracked bool produceRootFile = true 
	untracked string rootFileName = "PhysicsObjectsMonitor.root"
    }


# Path
    path p = {dtunpacker, dt1DRecHits, dt2DSegments, dt4DSegments,muonCSCDigis, csc2DRecHits, cscSegments,
              CosmicMuonSeed, standAloneMuons, PhysicsObjectsMonitor}
    endpath this_is_the_end = {out}
}
